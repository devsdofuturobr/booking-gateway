server:
  port: ${SERVER_PORT:9000}

spring:
  application:
    name: gateway

  cloud:
    gateway:
      server:
        webmvc:
          routes:
          ###################################################################################
          ##########################  api-auth  #####################################
          - id: auth-main
            uri: ${URI_BOOKING_AUTH:http://localhost:9001}
            predicates:
              - Path=/auth
            filters:
              - RewritePath=/auth, /api/v1/auth

          - id: auth
            uri: ${URI_BOOKING_AUTH:http://localhost:9001}
            predicates:
              - Path=/auth/**
            filters:
              - RewritePath=/auth/(?<remaining>.*), /api/v1/auth/${remaining}

          ###################################################################################
          ##########################  api-booking  #####################################
          - id: booking-main
            uri: ${URI_BOOKING:http://localhost:9002}
            predicates:
              - Path=/bookings
            filters:
              - RewritePath=/bookings, /api/v1/bookings

          - id: booking
            uri: ${URI_BOOKING:http://localhost:9002}
            predicates:
              - Path=/bookings/**
            filters:
              - RewritePath=/bookings/(?<remaining>.*), /api/v1/bookings/${remaining}


